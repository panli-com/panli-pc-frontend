var gift={modelBtns:{1:"http://sf.panli.com/FrontEnd/images20090801/special/20121010/gift/tg_li_40.gif",2:"http://sf.panli.com/FrontEnd/images20090801/special/20121010/gift/tg_li_43.gif",3:"http://sf.panli.com/FrontEnd/images20090801/special/20121010/gift/tg_li_46.gif"},exchange:function(C){if(C){var E=C.data.id;var A=C.data.group;var D=C.data.src;var B=C.data.name;$.ajax({type:"POST",url:"/App_Services/wsSpecial.asmx/SpecialGift",dataType:"json",contentType:"application/json;utf-8",data:'{"id":"'+E+'","group": "'+A+'"}',timeout:10000,beforeSend:function(){$("#repeattip,#pointtip,#coupontip,#producttip").hide()},complete:function(){},error:function(){alert("网络出现出错!")},success:function(F){if(F.d=="Fail"){alert("领取奖品出现错误!");return false}if(F.d=="Limited"){alert("该奖品已经被领取完了!");return false}if(F.d=="NoQualify"){alert("对不起，您还没有达到领取奖品的条件!");return false}if(F.d=="AlreadyAdded"){gift.showTip(-1,B,D);return false}if(F.d=="Success"){gift.showTip(E,B,D);return false}if(F.d=="noLogin"){gift.login();return false}}})}},login:function(){window.Panli.Login()},showTip:function(C,A,B){if(C==-1){$("#repeattip").show()}else{if(C==8){$("#pointtip").show()}else{if(C==9){$("#coupontip").show()}else{$("#productimg").attr({"alt":A,"src":B});$("#productname").html("").html(A);$("#producttip").show()}}}$("div.share_message").show();$("div.gl_overlay").show()},closeTip:function(){$("div.share_message").hide();$("div.gl_overlay").hide();$("div.choujiang_jieguo").hide();$("#repeattip,#pointtip,#coupontip,#producttip").hide();window.location.href=window.location},initBtnsEvent:function(){var C=$("a[id^=gift]").filter(function(){return $(this).attr("state")==1});var B=$("a[id^=gift]").filter(function(){return $(this).attr("state")==2});var A=$("a[id^=gift]").filter(function(){return $(this).attr("state")==3});C.each(function(){var G=$(this).parent().parent().find(".picmark").attr("alt");var E=$(this).parent().parent().find(".picmark").attr("src");var F=$(this).attr("id").split("_")[1];var D=$(this).attr("group");$(this).children("img").attr("src",gift.modelBtns[1]);$(this).bind("click",{id:F,group:D,name:G,src:E},gift.exchange);$(this).css("cursor","pointer")});B.each(function(){$(this).children("img").attr("src",gift.modelBtns[2]);$(this).unbind("click",gift.exchange)});A.each(function(){$(this).children("img").attr("src",gift.modelBtns[3]);$(this).unbind("click",gift.exchange)})}};$(document).ready(function(){gift.initBtnsEvent()});