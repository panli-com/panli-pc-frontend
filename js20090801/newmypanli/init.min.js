// init.min.js
// 2012/4/21

$.extend({ changed: false, Msg: { alert: function(a) { alert(a) }, confirm: function(a) { confirm(a) } }, ReloadCheck: function(a) { window.onbeforeunload = function() { if (changed) { return a } } }, TabEffect: function(a, c, b) { $.each($("." + a).parent().children(), function(d, e) { $(this).bind(b || "click", function() { var f = $(this); if (!f.hasClass(a)) { $(this).addClass(a).siblings().removeClass(a), c && c[d] && c[d].call() } }) }) }, PageChangedAlertRegister: function(a) { a = a || "刷新当前页面，您输入的内容将不被保存，确定要继续吗?"; window.onbeforeunload = function() { var b = ""; $(":text").each(function(e, c) { b += $.trim($(c).val()) }); if (b.length > 0 || $(":checked").length > 0) { return a } } } }); $.fn.extend({ ForceNumericOnly: function() { return this.each(function() { $(this).keydown(function(a) { var b = a.charCode || a.keyCode || 0; return (b == 8 || b == 9 || b == 46 || (b >= 37 && b <= 40) || (b >= 48 && b <= 57) || (b >= 96 && b <= 105)) }) }) }, IsEmptyValue: function() { return (this.val() == undefined || $.trim(this.val()) == "" || $.trim(this.val()) == this.attr("placeholder")) } }); $.fn.extend({ DisplayTime: function(d) { var a = $(this); var b = self.setInterval(c, 1000); function c() { var h = d--; if (h <= 0) { a.html("已截团"); window.clearInterval(b); return } var e = parseInt(h / 86400); h %= 86400; var f = parseInt(h / 3600); h %= 3600; var g = parseInt(h / 60); h %= 60; var i = h; a.html("剩余<span>" + e + "</span>天<span>" + f + "</span>小时<span>" + g + "</span>分<span>" + i + "</span>秒") } } }); $(function() { $('input[type="date"]').each(function() { var a = $(this); a.datepicker && a.datepicker({ changeYear: true, changeMonth: true, dateFormat: "yy-mm-dd", yearRange: "1900:" + new Date().getFullYear() }) }); $("[placeholder]").each(function() { var a = $(this); var c = a.attr("placeholder"); function b() { if (a.val() == "") { a.val(c) } if (a.val() == c) { a.css("color", "#BBB") } else { a.css("color", "#000") } } b(); a.focus(function() { if (a.val() == c) { a.val("") } a.css("color", "#000") }).blur(function() { if (a.val() == "" || a.val() == c) { a.val(c).css("color", "#BBB") } }); a.change(function() { b() }) }); $('input[type="number"]').blur(function() { var a = $(this); var b = parseInt(a.val(), 10); if (b < parseInt(a.attr("min"), 10)) { a.val(a.attr("min"), 10) } if (b > parseInt(a.attr("max"), 10)) { a.val(parseInt(a.attr("max"), 10)) } }).ForceNumericOnly(); $("#j_back").click(function() { history.go(-1) }); $("form").bind("submit", function() { $("[placeholder]").each(function() { var a = $(this); var b = a.attr("placeholder"); if (a.val() == b) { a.val("") } }) }) });